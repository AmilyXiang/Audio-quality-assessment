# å¹²å‡€è¯­éŸ³é…ç½®æŒ‡å—

## æ¦‚è¿°

æœ¬é…ç½®ä¸“ä¸º**é«˜è´¨é‡å½•éŸ³å®¤å½•éŸ³ã€æ’­å®¢ã€ä¸“ä¸šé…éŸ³**ç­‰å¹²å‡€è¯­éŸ³è®¾è®¡ã€‚è¿™äº›éŸ³é¢‘é€šå¸¸å…·æœ‰ï¼š
- ä½èƒŒæ™¯å™ªå£°
- ä¸“ä¸šè®¾å¤‡å½•åˆ¶
- è‰¯å¥½çš„å£°å­¦ç¯å¢ƒ
- è¾ƒé«˜çš„é‡‡æ ·ç‡ï¼ˆâ‰¥ 32kHzï¼‰

## é…ç½®å¯¹æ¯”æµ‹è¯•ç»“æœ

æµ‹è¯•æ–‡ä»¶ï¼š`women_voice_speech.wav`ï¼ˆ32kHzï¼Œ28.91ç§’ï¼Œç”¨æˆ·è¯„ä»·ï¼š100% æ­£å¸¸ï¼‰

| é…ç½®ç±»å‹ | å™ªå£° | å¡é¡¿ | éŸ³é‡æ³¢åŠ¨ | å¤±çœŸ | **æ€»è®¡** |
|---------|------|------|---------|------|---------|
| **é»˜è®¤é…ç½®** | 18 | 1 | 25 | 27 | **71** âŒ |
| å®½æ¾é…ç½® | 2 | 1 | 10 | 14 | **27** âš ï¸ |
| **è¶…å®½æ¾é…ç½®ï¼ˆæ¨èï¼‰** | 0 | 0 | 8 | 8 | **16** âœ… |
| ç¦ç”¨VAD | 11 | 0 | 11 | 7 | **29** âš ï¸ |

## æ¨èé…ç½®ï¼šè¶…å®½æ¾é…ç½®

### Pythonä»£ç 

```python
from analyzer.config import Config

# åˆ›å»ºå¹²å‡€è¯­éŸ³ä¸“ç”¨é…ç½®
clean_speech_config = Config(
    # 1. æœ€å°æŒç»­æ—¶é—´è®¾ç½®ï¼ˆæ¯”é»˜è®¤å€¼æé«˜ 3-4 å€ï¼‰
    min_dropout_duration=0.20,      # é»˜è®¤: 0.05s â†’ æ”¾å®½åˆ° 0.20s
    min_distortion_duration=0.50,   # é»˜è®¤: 0.12s â†’ æ”¾å®½åˆ° 0.50s
    min_noise_duration=0.60,        # é»˜è®¤: 0.15s â†’ æ”¾å®½åˆ° 0.60s
    min_volume_duration=1.00,       # é»˜è®¤: 0.25s â†’ æ”¾å®½åˆ° 1.00s
    
    # 2. é˜ˆå€¼å€æ•°ï¼ˆä¿æŒé»˜è®¤ï¼‰
    dropout_threshold_multiplier=3.0,
    volume_threshold_multiplier=2.0,
    
    # 3. VADè®¾ç½®ï¼ˆä¿æŒå¯ç”¨ï¼‰
    vad_enabled=True,
    vad_frame_duration_ms=20,
    vad_padding_duration_ms=200,
    vad_energy_threshold=0.02,
    
    # 4. é‡‡æ ·ç‡ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
    sample_rate=None  # å°†è‡ªåŠ¨ä»éŸ³é¢‘æ–‡ä»¶è¯»å–
)
```

### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶ clean_speech.json
{
    "min_dropout_duration": 0.20,
    "min_distortion_duration": 0.50,
    "min_noise_duration": 0.60,
    "min_volume_duration": 1.00,
    "dropout_threshold_multiplier": 3.0,
    "volume_threshold_multiplier": 2.0,
    "vad_enabled": true,
    "vad_frame_duration_ms": 20,
    "vad_padding_duration_ms": 200,
    "vad_energy_threshold": 0.02
}

# ä½¿ç”¨é…ç½®åˆ†ææ–‡ä»¶
python analyze_file.py your_audio.wav --config clean_speech.json
```

## å‚æ•°è¯´æ˜

### ä¸ºä»€ä¹ˆè¦æ”¾å®½é˜ˆå€¼ï¼Ÿ

**é»˜è®¤é…ç½®**é’ˆå¯¹çš„æ˜¯**ç”µè¯/VoIPè´¨é‡**ï¼ˆ8kHzé‡‡æ ·ç‡ã€å‹ç¼©éŸ³é¢‘ã€ç½‘ç»œä¼ è¾“ï¼‰ï¼Œå¯¹ç¬æ—¶å˜åŒ–éå¸¸æ•æ„Ÿã€‚

**å¹²å‡€è¯­éŸ³**å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ä¼šè¢«è¯¯åˆ¤ï¼š

1. **è‡ªç„¶çš„éŸ³é‡å˜åŒ–**
   - æƒ…æ„Ÿè¡¨è¾¾çš„å¼ºå¼±å˜åŒ–
   - è¯­è°ƒçš„è‡ªç„¶èµ·ä¼
   - å¥å°¾çš„è‡ªç„¶å‡å¼±
   - **è§£å†³æ–¹æ¡ˆ**ï¼š`min_volume_duration=1.00s` å¿½ç•¥çŸ­æš‚å˜åŒ–

2. **ä¸°å¯Œçš„é¢‘ç‡å†…å®¹**
   - é«˜é‡‡æ ·ç‡ä¿ç•™æ›´å¤šé«˜é¢‘
   - å¥³å£°çš„é½¿éŸ³ï¼ˆsibilantsï¼‰
   - æ¸…æ™°çš„è¾…éŸ³å‘éŸ³
   - **è§£å†³æ–¹æ¡ˆ**ï¼š`min_distortion_duration=0.50s` å…è®¸è‡ªç„¶çš„é¢‘è°±å˜åŒ–

3. **ä½å™ªå£°åº•å™ª**
   - æˆ¿é—´åå°„å£°
   - è½»å¾®çš„ç©ºè°ƒ/è®¾å¤‡å™ªå£°
   - å‘¼å¸éŸ³
   - **è§£å†³æ–¹æ¡ˆ**ï¼š`min_noise_duration=0.60s` å¿½ç•¥ç¯å¢ƒéŸ³

4. **å¹³æ»‘çš„è¯­éŸ³æµ**
   - å¾ˆå°‘çœŸæ­£çš„å¡é¡¿/æ‰å¸§
   - **è§£å†³æ–¹æ¡ˆ**ï¼š`min_dropout_duration=0.20s` æé«˜æ£€æµ‹é—¨æ§›

## ä¸åŒåœºæ™¯çš„é…ç½®é€‰æ‹©

### ğŸ“ ç”µè¯/VoIPè´¨é‡ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰
```python
# ä½¿ç”¨ Config() ä¸ä¼ å‚æ•°ï¼Œæˆ–
config = Config(
    min_dropout_duration=0.05,
    min_distortion_duration=0.12,
    min_noise_duration=0.15,
    min_volume_duration=0.25
)
```
**é€‚ç”¨äº**ï¼šç½‘ç»œç”µè¯ã€å®¢æœå½•éŸ³ã€ç”µè¯ä¼šè®®ã€è¯­éŸ³ä¿¡ç®±

---

### ğŸ™ï¸ æ’­å®¢/è®¿è°ˆï¼ˆä½¿ç”¨å®½æ¾é…ç½®ï¼‰
```python
config = Config(
    min_dropout_duration=0.10,
    min_distortion_duration=0.25,
    min_noise_duration=0.30,
    min_volume_duration=0.50
)
```
**é€‚ç”¨äº**ï¼šéä¸“ä¸šç¯å¢ƒå½•åˆ¶ã€USBéº¦å…‹é£ã€è½»å¾®ç¯å¢ƒå™ªå£°

---

### ğŸ¬ ä¸“ä¸šé…éŸ³/å½•éŸ³å®¤ï¼ˆä½¿ç”¨è¶…å®½æ¾é…ç½®ï¼‰
```python
config = Config(
    min_dropout_duration=0.20,
    min_distortion_duration=0.50,
    min_noise_duration=0.60,
    min_volume_duration=1.00
)
```
**é€‚ç”¨äº**ï¼šä¸“ä¸šéº¦å…‹é£ã€å£°å­¦å¤„ç†æˆ¿é—´ã€é«˜è´¨é‡å‰ç½®æ”¾å¤§å™¨

---

### ğŸ“» éŸ³ä¹/å¹¿æ’­ï¼ˆè€ƒè™‘ç¦ç”¨VADï¼‰
```python
config = Config(
    min_dropout_duration=0.20,
    min_distortion_duration=0.50,
    min_noise_duration=0.60,
    min_volume_duration=1.00,
    vad_enabled=False  # ç¦ç”¨VADï¼Œå› ä¸ºéŸ³ä¹æ²¡æœ‰"è¯­éŸ³"çš„æ¦‚å¿µ
)
```
**æ³¨æ„**ï¼šæµ‹è¯•æ˜¾ç¤ºç¦ç”¨VADå¯èƒ½å¢åŠ è¯¯æŠ¥ï¼Œéœ€æ ¹æ®å…·ä½“å†…å®¹è°ƒæ•´

## è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®

å¦‚æœä½¿ç”¨è¶…å®½æ¾é…ç½®å**ä»æœ‰è¾ƒå¤šè¯¯æŠ¥**ï¼Œå¯ä»¥ï¼š

### 1. ç»“åˆæ ¡å‡†é…ç½®
```bash
# å…ˆç”Ÿæˆæ ¡å‡†æ–‡ä»¶
python calibrate.py good_sample.wav -o baseline.json

# ä½¿ç”¨æ ¡å‡† + è¶…å®½æ¾é…ç½®
python analyze_file.py test.wav --profile baseline.json --config clean_speech.json
```

### 2. è°ƒæ•´å…·ä½“æ£€æµ‹å™¨

åªé’ˆå¯¹é—®é¢˜æœ€å¤šçš„æ£€æµ‹å™¨æ”¾å®½ï¼š

```python
# ä¾‹å¦‚ï¼šå¦‚æœåªæœ‰éŸ³é‡æ³¢åŠ¨è¯¯æŠ¥å¤š
config = Config(
    min_volume_duration=2.00,  # è¿›ä¸€æ­¥æ”¾å®½åˆ° 2 ç§’
    # å…¶ä»–ä¿æŒè¶…å®½æ¾é…ç½®
    min_distortion_duration=0.50,
    min_noise_duration=0.60,
    min_dropout_duration=0.20
)
```

### 3. æé«˜é˜ˆå€¼å€æ•°

```python
config = Config(
    # æœ€å°æŒç»­æ—¶é—´ï¼ˆè¶…å®½æ¾ï¼‰
    min_dropout_duration=0.20,
    min_distortion_duration=0.50,
    min_noise_duration=0.60,
    min_volume_duration=1.00,
    
    # æé«˜é˜ˆå€¼å€æ•°ï¼ˆæ›´ä¸æ•æ„Ÿï¼‰
    dropout_threshold_multiplier=5.0,   # é»˜è®¤: 3.0
    volume_threshold_multiplier=3.0     # é»˜è®¤: 2.0
)
```

## å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šå¥³å£°æ’­å®¢
**é—®é¢˜**ï¼šé»˜è®¤é…ç½®æ£€æµ‹å‡º 71 ä¸ªé—®é¢˜  
**è§£å†³æ–¹æ¡ˆ**ï¼šè¶…å®½æ¾é…ç½®é™ä½åˆ° 16 ä¸ª  
**è¿›ä¸€æ­¥ä¼˜åŒ–**ï¼š
```python
# å¥³å£°ç‰¹ç‚¹ï¼šéŸ³é‡åŠ¨æ€èŒƒå›´å¤§ã€é«˜é¢‘ä¸°å¯Œ
config = Config(
    min_volume_duration=1.50,    # é’ˆå¯¹å¥³å£°åŠ¨æ€èŒƒå›´
    min_distortion_duration=0.60,  # å…è®¸é½¿éŸ³å’Œé«˜é¢‘
    min_noise_duration=0.60,
    min_dropout_duration=0.20
)
```

### æ¡ˆä¾‹2ï¼šç”·å£°æœ‰å£°ä¹¦
**é—®é¢˜**ï¼šè¾ƒå°‘è¯¯æŠ¥ï¼Œä½†å¶æœ‰ä½é¢‘å™ªå£°è¯¯åˆ¤  
**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
config = Config(
    min_noise_duration=0.80,     # ç”·å£°ä½é¢‘å…±æŒ¯å¯èƒ½è¯¯åˆ¤
    min_volume_duration=1.00,
    min_distortion_duration=0.50,
    min_dropout_duration=0.20
)
```

## æ€»ç»“

- **é»˜è®¤é…ç½®**ï¼šé€‚åˆ 8kHz VoIPï¼Œå¯¹å¹²å‡€è¯­éŸ³è¯¯æŠ¥ç‡é«˜ï¼ˆ71ä¸ªï¼‰
- **å®½æ¾é…ç½®**ï¼šä¸­ç­‰æ”¹å–„ï¼ˆ27ä¸ªï¼‰ï¼Œé€‚åˆéä¸“ä¸šå½•éŸ³
- **è¶…å®½æ¾é…ç½®**ï¼šæ¨èç”¨äºä¸“ä¸šå½•éŸ³ï¼ˆ16ä¸ªï¼‰ï¼Œæ˜¾è‘—é™ä½è¯¯æŠ¥
- **ç¦ç”¨VAD**ï¼šä¸æ¨èï¼Œå¯èƒ½å¢åŠ è¯¯æŠ¥

æ ¹æ®æ‚¨çš„éŸ³é¢‘æ¥æºé€‰æ‹©åˆé€‚çš„é…ç½®é¢„è®¾ï¼Œå¿…è¦æ—¶ç»“åˆæ ¡å‡†å’Œæ‰‹åŠ¨è°ƒå‚è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚
